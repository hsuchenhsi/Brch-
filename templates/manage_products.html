<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>商品管理</title>
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const categoryField = document.getElementById('id_category');
            const subcategoryField = document.getElementById('id_subcategory');

            const subcategories = {
                'tops': ['無袖', '短袖', '長袖', '襯衫'],
                'bottoms': ['裙類', '短褲', '長褲', '牛仔褲'],
                'dresses': ['小碎花', '直筒', '無袖'],
                'sweaters': ['毛衣', '針織背心', '針織外套'],
                'outerwear': ['休閒外套', '防風外套', '羽絨外套', '大衣'],
                'homewear': ['睡衣', '睡袍'],
                'shoes': ['平底鞋', '老爹鞋', '洞洞鞋'],
                'bags': ['手提包', '後背包', '肩背包', '皮夾'],
                'accessories': ['飾品', '皮帶', '帽子']
            };

            function updateSubcategoryOptions() {
                const selectedCategory = categoryField.value;
                const options = subcategories[selectedCategory] || [];
                subcategoryField.innerHTML = '';
                options.forEach(option => {
                    const opt = document.createElement('option');
                    opt.value = option;
                    opt.text = option;
                    subcategoryField.appendChild(opt);
                });
            }

            categoryField.addEventListener('change', updateSubcategoryOptions);
            updateSubcategoryOptions();
        });
    </script>
</head>
<body>
    <h1>新增商品</h1>
    <form method="post">
        {% csrf_token %}
        <div class="fieldWrapper">
            <label for="id_productNo">編號:</label>
            {{ form.productNo }}
        </div>
        <div class="fieldWrapper">
            <label for="id_category">主分類:</label>
            {{ form.category }}
        </div>
        <div class="fieldWrapper">
            <label for="id_subcategory">細分類</label>
            <select name="subcategory" id="id_subcategory">
                <option value="">---------</option>
            </select>
        </div>
        <div class="fieldWrapper">
            <label for="id_productName">名稱:</label>
            {{ form.productName }}
        </div>
        <div class="fieldWrapper">
            <label for="id_describe">描述:</label>
            {{ form.describe }}
        </div>
        <div class="fieldWrapper">
            <label for="id_picture">圖片:</label>
            {{ form.picture }}
        </div>
        <div class="fieldWrapper">
            <label for="id_price">價格:</label>
            {{ form.price }}
        </div>
        <button type="submit">新增商品</button>
    </form>

    <h1>現有商品</h1>
    <ul>
        {% for product in products %}
            <li>
                {{ product.productNo }} - {{ product.productName}}
                <a href="{% url 'edit_product' product.productNo %}">修改商品資料</a>
                <a href="{% url 'delete_product' product.productNo %}">刪除商品</a>
            </li>
        {% endfor %}
    </ul>
</body>
</html>
